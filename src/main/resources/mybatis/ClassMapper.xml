<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kbstar.mapper.ClassMapper">
    <select id="select" parameterType="String" resultType="ClassBasic">
        SELECT *
        FROM Class_Basic
        WHERE classpin = #{classpin}
    </select>
    <select id="selectall" resultType="ClassBasic">
        SELECT *
        FROM Class_Basic
    </select>
    <select id="getpage" resultType="ClassBasic">
        SELECT *
        FROM Class_Basic
        ORDER BY classpin DESC
    </select>
    <select id="getpage_category" parameterType="String" resultType="ClassBasic">
        SELECT *
        FROM Class_Basic
        <where>
            <if test="type != null and !type.equals('')">
                type LIKE '%'||#{type}||'%'
            </if>
            <if test="location != null and !location.equals('')">
                AND location LIKE '%'||#{location}||'%'
            </if>

        </where>
        ORDER BY classpin DESC
    </select>
    <select id="search" parameterType="String" resultType="ClassBasic">
        SELECT * FROM Class_Basic
        <where>
            <if test="classtitle != null and !classtitle.equals('') ">
                AND classtitle LIKE '%'||upper(#{classtitle})||'%'
            </if>
        </where>
    </select>
    <select id="getsearch" parameterType="String" resultType="ClassBasic">
        SELECT *
        FROM Class_Basic
        WHERE classtitle LIKE '%' || #{classtitle} || '%'
        ORDER BY classpin DESC
    </select>
    <select id="getlocation" parameterType="String" resultType="ClassBasic">
        SELECT *
        FROM Class_Basic
        WHERE
        <if test="location != null and !location.equals('*')">
            location = #{location}
        </if>
        ORDER BY classpin DESC
    </select>
    <select id="gettype" parameterType="String" resultType="ClassBasic">
        SELECT *
        FROM Class_Basic
        WHERE
        <if test="type != null and !type.equals('*')">
            type = #{type}
        </if>
        ORDER BY classpin DESC
    </select>

    <select id="getlocationtype" parameterType="Map" resultType="ClassBasic">
        SELECT *
        FROM Class_Basic
        <where>
            <if test="location != null and !location.equals('*')">
                location = #{location}
            </if>

            <if test="type != null and !type.equals('*')">
                AND type = #{type}
            </if>
        </where>
        ORDER BY classpin DESC
    </select>


    <!--    <insert id="insert" parameterType="ClassBasic">-->
    <!--        INSERT INTO adm-->
    <!--        VALUES (#{id}, #{pwd}, #{lev})-->
    <!--    </insert>-->
    <!--    <update id="update" parameterType="ClassBasic">-->
    <!--        UPDATE adm-->
    <!--        SET pwd=#{pwd},-->
    <!--            lev=#{lev}-->
    <!--        WHERE id = #{id}-->
    <!--    </update>-->
    <!--    <delete id="delete" parameterType="String">-->
    <!--        DELETE-->
    <!--        FROM adm-->
    <!--        WHERE id = #{id}-->
    <!--    </delete>-->

</mapper>